
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to pybrowser’s documentation &#8212; pybrowser 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-pybrowser-s-documentation">
<h1><strong>Welcome to pybrowser’s documentation</strong><a class="headerlink" href="#welcome-to-pybrowser-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="about-the-project">
<h2><strong>About the project</strong><a class="headerlink" href="#about-the-project" title="Permalink to this headline">¶</a></h2>
<p><strong>pybrowser</strong> is an attempt to simplify browser automation designed keeping end user in mind. Here
is an example of usage,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pybrowser</span> <span class="kn">import</span> <span class="n">Browser</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://www.google.com/&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;name:=q&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">enter</span><span class="p">(</span><span class="s2">&quot;news&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;name:=btnK&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="n">b</span><span class="o">.</span><span class="n">take_screenshot</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">html</span><span class="p">()</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">links</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="why-another-browser-automation-api">
<h2><strong>Why another browser automation API ?</strong><a class="headerlink" href="#why-another-browser-automation-api" title="Permalink to this headline">¶</a></h2>
<p>You might be wondering, there are already enough automation APIs / libraries in the market, why another one ?
Well, as a starter, <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> isn’t really a library per say, it is merely a toolkit that is an abstraction
around the well known <a class="reference external" href="https://selenium-python.readthedocs.io/">Selenium</a> and <a class="reference external" href="http://docs.python-requests.org/en/master/">Requests</a>
libraries in python. That means, you are not “forced” to do things in a certain way in <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> as done by other libraries.
Ruby’s <a class="reference external" href="http://watir.com/">watir</a> is the main source of inspiration behind some of the design decissions, but <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> is
much simpler in terms of design as well as usage ! It is also lighweight and doesn’t add too much overhead when it comes to abstraction.</p>
</div>
<div class="section" id="features">
<h2><strong>Features</strong><a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Browser as an object with simple interface to interact with webpage elements</p></li>
<li><p>Exposes specific HTML elements and corresponding functionalities</p></li>
<li><p>Special interface to submit HTML forms</p></li>
<li><p>Cached element attributes</p></li>
<li><p>Takes care of downloading corresponding browser drivers, adding to the path and other such overheads</p></li>
<li><p>In built support for handling page/element wait times, staleness of elements and other such issues due to dynamic nature of webpages</p></li>
<li><p>Access to response code and header information</p></li>
<li><p>Ability to run browser in headless/incognito/with proxy and all the good stuff</p></li>
<li><p>Non browser mode support to directly deal with HTML pages &amp; HTTP methods</p></li>
<li><p>HTML rendering support</p></li>
<li><p>Default exception handler</p></li>
<li><p>Uses Selenium and Requests under the hood</p></li>
</ul>
<div class="section" id="installation">
<h3><strong>Installation</strong><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p><strong>pybrowser</strong> is not in pypi (the cheeseshop!) yet.</p>
<p>If you use <a class="reference external" href="https://pipenv.readthedocs.io/en/latest/">pipenv</a> , it can be installed with below command,</p>
<p><code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">git+https://github.com/abranjith/pybrowser.git#egg=pybrowser</span></code></p>
<p>With pip,</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/abranjith/pybrowser#egg=pybrowser</span></code></p>
<p><a class="reference external" href="https://docs.python.org/3/library/venv.html">Virtualenv</a> is highly recommended. Note that, if you are using pipenv, it takes care
of creating virtualenv for you.
Feel free to clone/ fork and play around.</p>
</div>
<div class="section" id="requirements">
<h3><strong>Requirements</strong><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>python 3.7+</p></li>
<li><p>selenium</p></li>
<li><p>requests</p></li>
<li><p>pyppeteer</p></li>
<li><p>pyquery</p></li>
</ul>
<p>Note: Although, I have mentioned as python 3.7 or above, you should be able to get it to run with 3.6 also,
but not prior to that. For versions of other packages refer Pipfile or requirements file</p>
</div>
</div>
<div class="section" id="detailed-guide">
<h2><strong>Detailed guide</strong><a class="headerlink" href="#detailed-guide" title="Permalink to this headline">¶</a></h2>
<div class="section" id="browser-object">
<h3><strong>Browser object</strong><a class="headerlink" href="#browser-object" title="Permalink to this headline">¶</a></h3>
<p>Browser is the main object that needs to be instantiated for further usage. Here are some examples,
To use as a typical browser,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#currently supports - Browser.CHROME and Browser.IE,</span>
<span class="c1">#although Chrome is highly recommended</span>
<span class="n">browser</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
</pre></div>
</div>
<p>Browser supports multiple options as explained below,</p>
<ul class="simple">
<li><p>browser_name - name of the browser such as Browser.IE, Browser.CHROME etc</p></li>
<li><p>incognito - when set to True, will start browser in incognito mode</p></li>
<li><p>headless - when set to True, will start browser in headless mode (you won’t see the GUI)</p></li>
<li><p>browser_options - dict of options that you would provide to webdriver of corresponding browser</p></li>
<li><p>proxy - proxy url to use before starting browser</p></li>
<li><p>screenshot_on_exception - when set to True, takes screenshot when an exception occurs in webdriver</p></li>
<li><p>wait_time - wait time in seconds to be used in finding elements etc</p></li>
</ul>
<p>Below sections explain the functionalities exposed by Browser.</p>
</div>
<div class="section" id="as-a-web-browser">
<h3><strong>As a Web Browser</strong><a class="headerlink" href="#as-a-web-browser" title="Permalink to this headline">¶</a></h3>
<p>One of the key functionality provided by Browser object is access to your favorite browser as mentioned above.
You can automate pretty much all of the activities you can do with you browser plus much more. Here are some examples,</p>
<ul>
<li><p><strong>Navigation</strong></p>
<p>Navigate just like how you would do in a regular browser.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">refresh</span>
    <span class="n">b</span><span class="o">.</span><span class="n">back</span>
    <span class="n">b</span><span class="o">.</span><span class="n">forward</span>
</pre></div>
</div>
</li>
<li><p><strong>Access to important properties</strong></p>
<p>Access various properties of the browser/page like current url, page title, cookies, response data etc.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="c1">#underlying selenium webdriver object</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">driver</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">url</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">title</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">cookies</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">response_code</span>
    <span class="n">rh</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">response_headers</span>
    <span class="n">re</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">response_encoding</span>
    <span class="c1">#content in bytes</span>
    <span class="n">binary_content</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">content</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c1">#content in text</span>
    <span class="n">text_content</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">content</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>More advanced actions on browser</strong></p>
<p>You can perform a bunch of actions with the browser apart from accessing properties and general navigation.</p>
<ul>
<li><p><strong>Change driver</strong></p>
<p>If you don’t like the underlying selenium webdriver, provide your own</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">your_custom_driver</span>
</pre></div>
</div>
</li>
<li><p><strong>Change window size</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">maximize_window</span>
<span class="n">b</span><span class="o">.</span><span class="n">minimize_window</span>
<span class="n">b</span><span class="o">.</span><span class="n">fullscreen_window</span>
</pre></div>
</div>
</li>
<li><p><strong>Switch to (from Selenium)</strong></p>
<p>You can switch to some other window, alert, frame etc. For more refer Selenium documentation <a class="reference external" href="https://selenium-python.readthedocs.io/navigating.html/">here</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">alert</span>
<span class="n">b</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">default_content</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="s1">&#39;frame_name&#39;</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Cookies</strong></p>
<p>Add / delete/ get cookies</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">cookies</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">add_cookie</span><span class="p">({</span><span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span> <span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span> <span class="p">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;secure&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">})</span>
<span class="n">b</span><span class="o">.</span><span class="n">delete_cookie</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">delete_all_cookies</span>
</pre></div>
</div>
</li>
<li><p><strong>JSON</strong></p>
<p>If the response is JSON, get json.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">json</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>HTML</strong></p>
<p>Get hold of HTML and do more with it. More on this in below section</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">html</span><span class="p">())</span>
</pre></div>
</div>
</li>
<li><p><strong>Underlying requests session</strong></p>
<p>Requests is an awesome python library for anything HTTP. More on that <a class="reference external" href="http://docs.python-requests.org/en/master/user/advanced/#session-objects">requests-session</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">requests_session</span>
</pre></div>
</div>
</li>
<li><p><strong>Take screenshot</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="c1">#guesses path</span>
    <span class="n">b</span><span class="o">.</span><span class="n">take_screenshot</span><span class="p">()</span>
    <span class="c1">#you can provide filename</span>
    <span class="n">b</span><span class="o">.</span><span class="n">take_screenshot</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;filename.png&#39;</span><span class="p">)</span>
    <span class="c1">#complete path without filename</span>
    <span class="n">b</span><span class="o">.</span><span class="n">take_screenshot</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/path/to/dir&#39;</span><span class="p">)</span>
    <span class="c1">#complete path with filename</span>
    <span class="n">b</span><span class="o">.</span><span class="n">take_screenshot</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/path/to/dir/filename.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Execute javascript on browser</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;valid javascript for browser&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Close (ofcourse)</strong></p>
<p>Closes all underlying sessions</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#with context manager no need to call close explicitly. Close is</span>
<span class="c1">#called automatically  (**recommended**)</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="c1">#in this case, you will need to call explicitly</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">close</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Work with page elements</strong></p>
<p>In a web page, access various elements and perform actions on them. Here are the various elements available,</p>
<ul>
<li><p><strong>Input</strong></p>
<p>Represents any input element such as text, textarea, input type text etc where user can enter some text.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/login&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;id:=username&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">enter</span><span class="p">(</span><span class="s2">&quot;someuser&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;id:=password&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span>
</pre></div>
</div>
</li>
<li><p><strong>Button</strong></p>
<p>Represents any button element such as button, input type button.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/login&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">enter</span><span class="p">(</span><span class="s2">&quot;someuser&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;xpath:=//*[@id=&#39;login&#39;]/button&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><strong>Link</strong></p>
<p>Represents any element with a href (typically link to another resource).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com&quot;</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="s2">&quot;xpath:=//*[@id=&#39;content&#39;]/ul/li[14]/a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">url</span>
</pre></div>
</div>
</li>
<li><p><strong>Radio</strong></p>
<p>Represents a radio button.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://www.w3schools.com/php/php_form_complete.asp&quot;</span><span class="p">)</span>
    <span class="n">radio</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">radio</span><span class="p">(</span><span class="s2">&quot;xpath:=/html/body/form//input[@value=&#39;female&#39;]&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">radio</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">radio</span><span class="o">.</span><span class="n">is_selected</span><span class="p">)</span>
    <span class="n">radio</span><span class="o">.</span><span class="n">select</span>
</pre></div>
</div>
</li>
<li><p><strong>Checkbox</strong></p>
<p>Represents a checkbox.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/checkboxes&quot;</span><span class="p">)</span>
    <span class="n">check_box</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;xpath:=//*[@id=&#39;checkboxes&#39;]/input[1]&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">check_box</span><span class="o">.</span><span class="n">is_checked</span><span class="p">)</span>
    <span class="n">check_box</span><span class="o">.</span><span class="n">check</span>
    <span class="n">check_box</span><span class="o">.</span><span class="n">uncheck</span>
</pre></div>
</div>
</li>
<li><p><strong>Select</strong></p>
<p>Represents any dropdown with one or many options to select from.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/checkboxes&quot;</span><span class="p">)</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;id:=dropdown&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>
    <span class="n">dropdown</span><span class="o">.</span><span class="n">select_by_indices</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">dropdown</span><span class="o">.</span><span class="n">select_by_visible_texts</span><span class="p">(</span><span class="s2">&quot;Option 1&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dropdown</span><span class="o">.</span><span class="n">all_selected_options</span><span class="p">)</span>
    <span class="n">dropdown</span><span class="o">.</span><span class="n">deselect_all</span>       <span class="c1">#and so on</span>
</pre></div>
</div>
</li>
<li><p><strong>File</strong></p>
<p>Represents a file element which is typically used to upload or download files.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/download&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;xpath:=//*[@id=&#39;content&#39;]/div/a[1]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="s1">&#39;/to/dir/&#39;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/upload&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;id:=file-upload&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/path/to/valid/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Form</strong></p>
<p>Represents a HTML form.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form_data</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id:=username&quot;</span><span class="p">,</span> <span class="s2">&quot;tomsmith&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;id:=password&quot;</span><span class="p">,</span> <span class="s2">&quot;SuperSecretPassword!&quot;</span><span class="p">)]</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/login&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">form</span><span class="p">(</span><span class="s2">&quot;id:=login&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fill_and_submit_form</span><span class="p">(</span><span class="n">form_data</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Element</strong></p>
<p>Represents any element which doesn’t belong to any of the categories above</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/add_remove_elements/&quot;</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;xpath:=//*[@id=&#39;content&#39;]/h3&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Common actions on elements</strong></p>
<p>Even though above section describes most of the actions, below is a consolidation of some common ones.
These are common, which means these can be applied on any element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;id:=element&quot;</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="c1">#typically used in forms</span>
    <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="c1">#just waits for time in seconds</span>
    <span class="n">e</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="c1">#physically move to the element</span>
    <span class="n">e</span><span class="o">.</span><span class="n">move_to_element</span>
    <span class="c1">#highlights the element, try this out !</span>
    <span class="n">e</span><span class="o">.</span><span class="n">highlight</span>
    <span class="n">e</span><span class="o">.</span><span class="n">double_click</span>
    <span class="c1">#drag element e and drop at element represented by to_locator</span>
    <span class="n">e</span><span class="o">.</span><span class="n">drag_and_drop_at</span><span class="p">(</span><span class="n">to_locator</span><span class="o">=</span><span class="s2">&quot;id:=to_element&quot;</span><span class="p">)</span>
    <span class="c1">#drag element e and drop at another element</span>
    <span class="n">e</span><span class="o">.</span><span class="n">drag_and_drop_at</span><span class="p">(</span><span class="n">to_element</span><span class="o">=</span><span class="n">other_element</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Access various properties of page elements</strong></p>
<p>Once you identify an element per above bullet point, you can access various properties of the element such as tag_name, id etc. Below are some examples.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/login&quot;</span><span class="p">)</span>
    <span class="n">ele</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;id:=username&quot;</span><span class="p">)</span>
    <span class="n">ele</span><span class="o">.</span><span class="n">enter</span><span class="p">(</span><span class="s2">&quot;some_user&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">tag_name</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="c1">#basically a list representing all css classess if any</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">css_classes</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="c1">#href in case it&#39;s a link</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">href</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Non-HTML properties of page elements</strong></p>
<p>Apart from the HTML properties there are some properties which essentially represent meta data around the element such as below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://the-internet.herokuapp.com/login&quot;</span><span class="p">)</span>
    <span class="n">ele</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;id:=username&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">is_found</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">)</span>
    <span class="c1">#alias to is_displayed</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">is_visible</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">is_enabled</span><span class="p">)</span>
    <span class="c1">#checks if the element has gone stale after finding</span>
    <span class="k">print</span><span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">is_stale</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Common problems and solutions</strong></p>
<p>Browser automation is hard, specially given the dynamic nature of today’s webpages. There are issues with page load, elements
getting refreshed in the background, lazy loading and so on. <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> comes with a toolkit to handle some of the most
common issues that can occur during browser automation.</p>
<ul>
<li><p><strong>Wait for page load</strong></p>
<p>When you visit a page, even though Selenium waits for the page load by default, I have experienced issues with this
behavior. So here are couple of ways to tackle that issue.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="c1">#keeps polling until page is loaded up until wait_time</span>
    <span class="n">b</span><span class="o">.</span><span class="n">wait_for_page_load</span><span class="p">(</span><span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="c1">#waits until element is found up until wait_time</span>
    <span class="n">b</span><span class="o">.</span><span class="n">wait_for_element</span><span class="p">(</span><span class="n">locator</span><span class="o">=</span><span class="s2">&quot;id:=element&quot;</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Element related</strong></p>
<p>Some of the common issues with element are element not found, not enabled, element going stale after finding etc.
<code class="docutils literal notranslate"><span class="pre">pybrowser's</span></code> toolkit provides some interesting interfaces to handle such issues.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="c1">#below line doesn&#39;t throw error if element is not found</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;id:=element&quot;</span><span class="p">)</span>
    <span class="c1">#true if element is found</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">is_found</span><span class="p">)</span>
    <span class="c1">#performs action only if found</span>
    <span class="n">e</span><span class="o">.</span><span class="n">if_found</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="c1">#true if element was found</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">is_found</span><span class="p">)</span>
    <span class="c1">#true if element is displayed</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">)</span>
    <span class="c1">#same as is_displayed</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">is_visible</span><span class="p">)</span>
    <span class="c1">#returns id only if displayed</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">if_displayed</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="c1">#true if element is enabled</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">is_enabled</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">if_enabled</span><span class="o">.</span><span class="n">move_to_element</span>
    <span class="c1">#true if element has gone stale</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">is_stale</span><span class="p">)</span>
    <span class="c1">#if you know element is going to go stale, wait for the same to happen</span>
    <span class="n">e</span><span class="o">.</span><span class="n">wait_for_staleness</span><span class="p">(</span><span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="c1">#if element has gone stale, calling refresh finds element again</span>
    <span class="n">e</span><span class="o">.</span><span class="n">if_stale</span><span class="o">.</span><span class="n">refresh</span>
    <span class="c1">#just waits for give time</span>
    <span class="n">e</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="c1">#since properties of an element is cached, if you wan&#39;t to refresh cache,</span>
    <span class="c1">#do below (to find element again)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">refresh</span>
</pre></div>
</div>
<p>Basically properties such as <code class="docutils literal notranslate"><span class="pre">is_found</span></code>, <code class="docutils literal notranslate"><span class="pre">is_displayed</span></code>, <code class="docutils literal notranslate"><span class="pre">is_visible</span></code>, <code class="docutils literal notranslate"><span class="pre">is_enabled</span></code>, <code class="docutils literal notranslate"><span class="pre">is_stale</span></code>
are flags available to precheck corresponding condition. And then there are properties such as
<code class="docutils literal notranslate"><span class="pre">if_found</span></code>, <code class="docutils literal notranslate"><span class="pre">if_displayed</span></code>, <code class="docutils literal notranslate"><span class="pre">if_visible</span></code>, <code class="docutils literal notranslate"><span class="pre">if_enabled</span></code>, <code class="docutils literal notranslate"><span class="pre">if_stale</span></code> provide ways to conditionally
perform actions on elements you are dealing with.</p>
</li>
<li><p><strong>Post click</strong></p>
<p>This issue is kind of similar to page load. When user clicks on an element (like a link or a button etc), even though
Selenium waits for page to be ready post the action, there have been issues with that. To resolve this issue, <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> provides an
interface where user can provide a hook function (should be callable) to which webdriver instance would be passed and user can
then have specific logic to handle page/ element refresh issue after click. If hook function isn’t provided there is a default wait function
in-built which should work most of the times.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://url&quot;</span><span class="p">)</span>
    <span class="c1">#user_func is called as user_func(webdriver) post the click action</span>
    <span class="n">e</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">hook</span><span class="o">=</span><span class="n">user_func</span><span class="p">)</span>
    <span class="c1">#same behavior below as well</span>
    <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">hook</span><span class="o">=</span><span class="n">user_func</span><span class="p">)</span>
    <span class="c1">#invokes default wait function post click</span>
    <span class="n">e</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="c1">#if there is no easy way to handle this, just wait after click or submit</span>
    <span class="n">e</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait_time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="non-browser-mode">
<h3><strong>Non Browser mode</strong><a class="headerlink" href="#non-browser-mode" title="Permalink to this headline">¶</a></h3>
<p><strong>pybrowser</strong> is much more than browser automation. One of the idea behind <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> was to make it an interface to all things
HTTP. So with that in mind, you can do the following with <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code></p>
<ul>
<li><p><strong>Access HTML &amp; parse</strong></p>
<p>You saw an example of accessing HTML object above via browser. You don’t have to open a browser (such as Chrome) for that.
Instead directly get html for the url and play around with that.</p>
<ul>
<li><p><strong>Get HTML directly</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#note that even though you are using Browser(), you don&#39;t provide any</span>
<span class="c1">#browser and hence no browser is opened</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://the-internet.herokuapp.com/login&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Search in HTML</strong></p>
<p>You can search in html for a specific template like below.
More on string formatting <a class="reference external" href="https://docs.python.org/3/library/string.html#format-string-syntax">format-string</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Look for some dynamic value</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://dollarrupee.in/&quot;</span><span class="p">)</span>
    <span class="n">search_text</span> <span class="o">=</span> <span class="s2">&quot;Current USD to INR exchange rate equals {} Rupees per 1 US Dollar&quot;</span>
    <span class="c1">#note that use_text=True uses actual text content of the html.</span>
    <span class="c1">#If this is False (default) HTML content is used instead</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">search_text</span><span class="p">,</span> <span class="n">use_text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="c1">#You can also search for multiple occurrences of a template</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://chromedriver.chromium.org/downloads&quot;</span><span class="p">)</span>
    <span class="n">search_text</span> <span class="o">=</span> <span class="s2">&quot;ChromeDriver {} &quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">search_all</span><span class="p">(</span><span class="n">search_text</span><span class="p">,</span> <span class="n">use_text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Find elements</strong></p>
<p>Search for HTML elements by their attributes</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Look for some dynamic value</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://url/&quot;</span><span class="p">)</span>
    <span class="n">e1</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="s2">&quot;some_id&quot;</span><span class="p">)</span>
    <span class="n">e2</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">find_by_class</span><span class="p">(</span><span class="s2">&quot;some_cssclass&quot;</span><span class="p">)</span>
    <span class="c1">#lxml style find rel links (&lt;a rel=&quot;tag&quot;&gt; Tag 1 &lt;/a&gt;)</span>
    <span class="n">e3</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">rel_links</span><span class="p">(</span><span class="s2">&quot;rel&quot;</span><span class="p">)</span>
    <span class="n">e4</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">find_by_css_selector</span><span class="p">(</span><span class="s2">&quot;div &gt; a&quot;</span><span class="p">)</span>
    <span class="n">e5</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">find_by_xpath</span><span class="p">(</span><span class="s2">&quot;//div/a&quot;</span><span class="p">)</span>
    <span class="c1">#returns list of tuple of link text and url</span>
    <span class="n">e6</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">links</span><span class="p">(</span><span class="n">containing</span><span class="o">=</span><span class="s2">&quot;some_text&quot;</span><span class="p">,</span> <span class="n">url_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Render</strong></p>
<p>If your HTML contains javascript that needs rendering then use this. You can also evaluate your own javascript</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This uses <a class="reference external" href="https://developers.google.com/web/tools/puppeteer/">puppeteer</a> from Google which basically uses headless chrome and requires it’s own version of chromium. So using render for the first time downloads chromium to PYPPETEER_HOME. Make sure there is right access to this folder</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">()</span> <span class="k">as</span> <span class="n">bro</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;() =&gt; {</span>
<span class="s1">    return {</span>
<span class="s1">        width: document.documentElement.clientWidth,</span>
<span class="s1">        height: document.documentElement.clientHeight,</span>
<span class="s1">        deviceScaleFactor: window.devicePixelRatio,</span>
<span class="s1">    }</span>
<span class="s1">    }&#39;&#39;&#39;</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">bro</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://the-internet.herokuapp.com/&quot;</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">script</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Save</strong></p>
<p>You can of course save the HTML</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Browser</span><span class="p">(</span><span class="n">browser_name</span><span class="o">=</span><span class="n">Browser</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://google.com&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>
    <span class="c1">#guesses path</span>
    <span class="n">h</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="c1">#you can provide filename</span>
    <span class="n">h</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;filename.html&#39;</span><span class="p">)</span>
    <span class="c1">#complete path without filename</span>
    <span class="n">h</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/path/to/dir&#39;</span><span class="p">)</span>
    <span class="c1">#complete path with filename</span>
    <span class="n">h</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/path/to/dir/filename.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Requests - Yes !</strong></p>
<p><a class="reference external" href="http://docs.python-requests.org/en/master/">Requests</a> has become synonym for anything HTTP
in python community. So how can we not use requests in <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> ? So we do. Two of the most common HTTP methods,
GET and POST are supported out of the box (with asynchronous). And since <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code> isn’t restrictive, you get access to requests-session
object which can be used to do anything HTTP.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Look for some dynamic value</span>
<span class="k">with</span> <span class="n">Browser</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="c1">#this is a blocking call</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://url/&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span><span class="s1">&#39;v&#39;</span><span class="p">})</span>
    <span class="c1">#text (str)</span>
    <span class="n">rt</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c1">#bytes</span>
    <span class="n">rb</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">rj</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span> <span class="c1">#if json</span>
    <span class="n">rh</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">response_headers</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">response_code</span>
    <span class="n">re</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">response_encoding</span>
    <span class="c1">#response object itself</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">response</span>
    <span class="c1">#non blocking, returns immediately</span>
    <span class="n">rp</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://url/&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;d&#39;</span><span class="p">}</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;k&#39;</span><span class="p">:</span><span class="s1">&#39;v&#39;</span><span class="p">},</span> <span class="n">asynch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c1">#non blocking</span>
    <span class="k">if</span> <span class="n">rp</span><span class="o">.</span><span class="n">is_request_done</span><span class="p">:</span>
        <span class="c1">#this is a blocking call on it&#39;s own</span>
        <span class="n">rp</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">result</span>
    <span class="n">rpt</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">content</span><span class="p">()</span>
    <span class="c1">#and so on...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="environment-variables">
<h3><strong>Environment variables</strong><a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h3>
<p>Below are some of the environment variables that can be set via <code class="docutils literal notranslate"><span class="pre">os.environ[name]=value</span></code>. Defaults are assumed in case one is
not provided</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PYBROWSER_HOME_DIR_PATH</span></code> : Path under which all files will be stored. Default is user home</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYBROWSER_DIR_NAME</span></code> : pybrowser main directory name. Default is <code class="docutils literal notranslate"><span class="pre">pybrowser</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DRIVERS_DOWNLOAD_DIR_NAME</span></code> : directory name where webdriver files will be saved. This will be under <code class="docutils literal notranslate"><span class="pre">PYBROWSER_DIR_NAME</span></code>. Default is browserdrivers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HTML_DIR_NAME</span></code> : directory name where HTML files will be saved. This will be under <code class="docutils literal notranslate"><span class="pre">PYBROWSER_DIR_NAME</span></code>. Default is html</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SCREENSHOTS_DIR_NAME</span></code> : directory name where screenshots will be saved. This will be under <code class="docutils literal notranslate"><span class="pre">PYBROWSER_DIR_NAME</span></code>. Default is screenshots</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYPPETEER_DIR_NAME</span></code> : directory name where puppeteer files will be saved. This will be under <code class="docutils literal notranslate"><span class="pre">PYBROWSER_DIR_NAME</span></code>. Default is puppeteer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYPPETEER_HOME</span></code> : Path where all puppeteer files would go. If this is present <code class="docutils literal notranslate"><span class="pre">PYPPETEER_DIR_NAME</span></code> has no significance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DEFAULT_LOGGER_PATH</span></code> : Path under which log files will be stored. Default is under <code class="docutils literal notranslate"><span class="pre">PYBROWSER_HOME_DIR_PATH</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DEFAULT_LOGGER_NAME</span></code> : Name for the logger to use. Default is pybrowser</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHROME_HOME_URL</span></code> : Home page URL for chromedriver</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHROME_DOWNLOAD_URL</span></code> : Download URL for chromedriver with placeholder for dynamic values such as version and filename</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHROME_FILENAME</span></code> : Chromedriver filename with placeholder for version</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHROMEDRIVER_VERSION</span></code> : Specific chromedriver version to use. Default is pulled from <code class="docutils literal notranslate"><span class="pre">CHROME_HOME_URL</span></code> (latest version)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHROMEDRIVER_DEFAULT_VERSION</span></code> : You either provide value for this flag or <code class="docutils literal notranslate"><span class="pre">CHROMEDRIVER_VERSION</span></code>. This basically tells the api to use this as fallback in case unable to pull latest from website</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IE_HOME_URL</span></code> : Home page URL for IEdriver</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IE_DOWNLOAD_URL</span></code> : Download URL for IEdriver with placeholder for dynamic values such as version and filename</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IE_FILENAME</span></code> : IEdriver filename with placeholder for version</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IEDRIVER_VERSION</span></code> : Specific IEdriver version to use. Default currently is 3.14</p></li>
</ul>
</div>
<div class="section" id="logging">
<h3><strong>Logging</strong><a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p><strong>pybrowser</strong> comes with default logger (<code class="docutils literal notranslate"><span class="pre">pybrowser</span></code>). Same can be used in your application as well.
You can of course use above environment variables related to logger to set your own name and path. You can give any name
during execution as well (see below). Example code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pybrowser</span> <span class="kn">import</span> <span class="n">log_adapter</span>
<span class="c1">#not providing logger_name uses default</span>
<span class="n">log</span> <span class="o">=</span> <span class="n">log_adapter</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="n">logger_name</span><span class="o">=</span><span class="s2">&quot;some_name&quot;</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">)</span>
<span class="c1">#current name will be remembered for the run and you can use</span>
<span class="c1">#log_adapter.get_logger() afterwards</span>
</pre></div>
</div>
</div>
<div class="section" id="contributing-to-pybrowser">
<h3><strong>Contributing to pybrowser</strong><a class="headerlink" href="#contributing-to-pybrowser" title="Permalink to this headline">¶</a></h3>
<p><strong>pybrowser</strong> is an open source project under MIT license. That means you are allowed to use it the way you wish.
If you are a developer and want to contribute, please feel free to send pull requests. You can also contribute with testing,
feature suggestion and/or addition, defect fixes, documentation etc</p>
</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">pybrowser</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, ranjith.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>